---
$title: Мышление в компонентах
$order: 4
leveled: правда
---

[уровень фильтра = "новичок"]

## Добавление функций на наш сайт

Но пока что мы превратили наш основной HTML-сайт в базовый AMP-сайт. На нашем сайте осталась только одна ошибка проверки, и мы исправим ее с помощью компонента `<amp-img>` вместо `<img>` . Исправив эту последнюю ошибку проверки, мы узнаем, что такое компоненты AMP, почему некоторые теги HTML заменены или запрещены в AMP и как добавлять компоненты на наш сайт.

После этого пришло время добавить дополнительный функционал на наш сайт. Чтобы завершить начальную версию нашей домашней страницы Chico's Cheese Bike, мы собираемся добавить дополнительный маркетинговый контент. Команда решила добавить видео на YouTube о создании наших сырных велосипедов, карусель изображений наших различных сырных велосипедов и ссылки на социальные сети, которые помогут пользователям делиться нашим сайтом со своими любимыми социальными сетями.

Может показаться утомительным добавить так много статей на наш сайт так быстро. Нам нужно создать HTML, CSS и JavaScript, чтобы выполнить многие требования к функциям, которые мы хотим добавить (например, как изменить активный слайд карусели). Затем нам нужно подумать, как сделать весь сайт работоспособным.

Но это красота AMP. С AMP нам не нужно беспокоиться обо всех этих деталях! Авторы библиотеки AMP предоставили нам встроенные блоки, которые предоставляют нам эти функции и помогают заботиться о таких качествах, как производительность, доступность и безопасность. Эти блоки называются **компонентами** , и они являются ключом к созданию успешных сайтов с AMP.

## Что такое веб-компоненты?

Компоненты являются строительными блоками для Интернета. Они представляют собой сочетание структуры (HTML), стиля (CSS) и поведения (JavaScript) с интерфейсом, который позволяет легко использовать его на вашем сайте и делиться с другими. Компоненты имеют:

- Имя (например, `<amp-img>` ), используемое в качестве имени тега для идентификации компонента.

- Пользовательские атрибуты, которые изменяют поведение, стиль или содержимое компонента (например, `width` , `height` , `src` и `attribution` ).

- События, которые могут захватывать пользовательские входные данные для компонента ( `on` атрибуту).

Необязательно, компоненты также имеют «дочерние элементы». Здесь «дети» относятся к контенту (например, тексту, тегам HTML или другим компонентам), который помещается между открывающим и закрывающим тегами компонента. То, как эти дочерние элементы отображаются на странице, отличается для каждого компонента.

Компонентная система AMP помогает вам быстро и эффективно создавать эффективные и быстро реагирующие функции на ваших страницах. Библиотека AMP предоставляет полный список компонентов, которые вы можете использовать. Существуют компоненты для построения форм и каруселей, для интеграции аналитики страниц, для отправки запросов XHR на серверы и многое другое. Возможности практически безграничны. Вы можете увидеть полный список доступных компонентов в справочнике AMP Components [здесь](../../../documentation/components/index.html) .

Например, вот три компонента AMP, которые мы могли бы использовать на нашем сайте:

AMP компонент | Как это сделать на нашем сайте
--- | ---
`<amp-img src="IMG-URL" layout="responsive" width="640" height="480"></amp-img>` | {{image ('/ static / img / courses / beginner / image14.png', 311, 550)}}
`<amp-twitter width="486" height="657" layout="responsive" data-tweetid="ID"></amp-twitter>` | {{image ('/ static / img / courses / beginner / image19.png', 311, 550)}}
`<amp-youtube data-videoid="ID" layout="responsive" width="480" height="270"></amp-youtube>` | {{image ('/ static / img / courses / beginner / image15.png', 311, 550)}}

Цель создания сайтов AMP - по возможности использовать компоненты AMP. Компоненты максимизируют производительность с помощью AMP, потому что вам не нужно создавать что-то, что уже существует, тем самым усиливая работу авторов библиотеки AMP.

Почти все компоненты AMP работают по крайней мере с некоторым JavaScript. Для некоторых компонентов AMP (например, `<amp-img>` ) JavaScript встроен непосредственно в сценарий выполнения AMP, который вы включили в верхней части своей страницы в шаблоне. Для большинства компонентов AMP вам необходимо включить отдельный тег script. И для этого есть веская причина: вы включаете только те сценарии, которые фактически используете на своем сайте. Затем пользователям нужно только загрузить код, необходимый для просмотра вашей страницы. Меньше кода для загрузки означает, что ваш сайт будет загружаться быстрее!

## Упражнение 3: наш первый компонент - `<amp-img>`

Большинство тегов HTML можно использовать непосредственно в AMP, но некоторые теги, такие как `<img>` , должны быть заменены эквивалентными компонентами AMP. Эти компоненты включают в себя встроенные передовые практики в области доступности, отзывчивости и производительности.

Например, в случае `<amp-img>` AMP требует от нас указать размеры изображения. AMP должен понимать макет страницы перед загрузкой ресурсов (например, изображений). Это улучшает взаимодействие с пользователем, когда ваша страница загружается, но до того, как ресурсы изображений были загружены. Когда изображения загружены, они могут быть вставлены в страницу без перемещения существующего содержимого на странице. Это дает возможность времени выполнения AMP решать, когда загружать изображения, на основе возможностей устройства пользователя и подключения к Интернету.

[tip type = "note"] **Примечание** . Если вы хотите узнать больше об автоматической оптимизации AMP, вы можете прочитать о отложенной загрузке в AMP в [приложении](appendix.md) . [/чаевые]

Чтобы использовать компонент и устранить ошибку проверки `<amp-img>` из предыдущего, замените существующий тег img на нашей странице эквивалентом AMP. Подсказка: вместо `<img …>` напишите `<amp-img …>` и присвойте своему изображению фиксированные размеры. Дайте изображению `width` `640` и `height` `480` .

При необходимости обратитесь к документации по `<amp-img>` [здесь](../../../documentation/components/reference/amp-img.md) .

### Решение

Часть страницы, содержащая изображение, должна выглядеть следующим образом:

[sourcecode: html] {% raw%} <amp-img src="https://cdn.glitch.com/d7f46a57-0ca4-4cca-ab0f-69068dec6631%2Fricotta-racer.jpg?1540228217746" width="”640”" height="480"></amp-img> {% endraw%} [/ sourcecode]

[tip type = "note"] **Примечание** :: Проверьте расширение AMP Validator. Если вы успешно выполнили это упражнение, значок расширения должен быть зеленым. Если так, поздравляю! Ваша страница теперь действительна AMP! [/чаевые]

## Расположение и размер компонентов

Следующая проблема, которую нам нужно устранить, связана с тем, как выглядит наша страница. Вы не заметите этого на большом настольном мониторе, но легко увидеть, что не так, когда мы смотрим на сайт на мобильном устройстве.

{{image ('/ static / img / courses / beginner / image23.png', 311, 550, выровняйте = 'центр третий', заголовок = 'Изображение велосипеда убегает от края экрана')}}

Изображение, которое мы добавили на страницу, не сжимается, чтобы соответствовать меньшим экранам; это просто льется на бок. Если мы не укажем стратегию размещения изображения и изменения его размера, по умолчанию будет использоваться фиксированная ширина и высота, как мы указали в нашем коде. К счастью, мы можем решить эту проблему, используя систему макетов AMP.

Мы собираемся дать нашему изображению `layout` с типом `responsive` чтобы он автоматически масштабировался при изменении размера окна. Адаптивный макет заставляет изображение принимать размеры родительского контейнера, при этом соблюдая исходное соотношение сторон. Если родительский контейнер имеет ширину всего 320 пикселей, изображение сохранит свое соотношение сторон и будет изменено до 320x240 (вместо 640x480).

Добавьте атрибут `layout` к нашему изображению. Если все сделано правильно, это будет выглядеть примерно так:

[sourcecode: html] {% raw%} <amp-img src="https://cdn.glitch.com/d7f46a57-0ca4-4cca-ab0f-69068dec6631%2Fricotta-racer.jpg?1540228217746" layout="responsive" width="640" height="480"></amp-img> {% endraw%} [/ sourcecode]

После внесения изменений взгляните на свою страницу. Изображение имеет правильное соотношение сторон и отзывчиво заполняет ширину экрана. Проблема решена.

{{image ('/ static / img / courses / beginner / image26.png', 311, 550, выровнять = 'центр третий', заголовок = 'Изображение велосипеда с правильным соотношением сторон')}}

Существуют и другие типы макетов, помимо адаптивного (по крайней мере, 8). Например, `fixed` макет указывает, что размер компонента никогда не должен изменяться с высоты и ширины, которые ему назначены. `intrinsic` компоновка аналогична `responsive` компоновке, за исключением того, что она имеет концепцию внутренней высоты и ширины, которая не может быть превышена компонентом. Некоторые макеты могут применяться только к определенным компонентам. В документации для каждого компонента будет указано, какие макеты являются действительными для этого компонента. Вы можете прочитать об остальных типах макетов [здесь](../../../documentation/guides-and-tutorials/learn/amp-html-layout/layouts_demonstrated.html) .

Если вы хотите стать успешным разработчиком AMP, крайне важно научиться пользоваться системой макетов. Все макеты, которые предоставляет AMP, могут быть реализованы с использованием простого CSS, но часто они могут быть сложными или иметь сложные крайние случаи, которые требуют глубоких знаний для обхода. AMP упрощает процесс и предоставляет многие из этих параметров макета для использования на любом элементе на странице AMP. Проверьте [официальную документацию](../../../documentation/guides-and-tutorials/learn/amp-html-layout/index.md) для получения дополнительной информации о системе макета.

[tip type = "tip"] **Совет** . Попробуйте выбрать другие мобильные устройства в раскрывающемся меню (см. снимок экрана ниже), чтобы увидеть, как изображение адаптируется к экранам разных размеров. Рекомендуется тестировать сайт на экранах разных размеров. Браузеры на реальных мобильных устройствах могут вести себя по-разному, поэтому по возможности проверяйте свою веб-страницу на реальных устройствах.

{{image ('/ static / img / courses / beginner / image4.png', 297, 380, выровнять = 'центральная половина', заголовок = 'выпадающий список устройств в Chrome')}} [/ tip]

## Упражнение 4: встраивание видео

Далее, давайте вставим видео YouTube в наш документ. Наша маркетинговая команда в Chico's Bikes выпустила [это](https://www.youtube.com/watch?v=BlpMQ7fMCzA) видео о том, как строится один из наших сырных велосипедов.

Используйте документацию [`<amp-youtube>`](../../../documentation/components/reference/amp-youtube.md) чтобы встроить это видео YouTube в компонент `<amp-img>` со следующими настройками:

- Установите идентификатор видео в `BlpMQ7fMCzA` .

- Сделайте видео макет `responsive` .

- **Примечание** : не забудьте добавить скрипт в `<head>` .

Рекомендуемые рекомендации по стилю:

- Установите `width` элемента `480` и `height` `270` .

[tip type = "read-on"] **Подсказка** : документация содержит примеры использования компонента `<amp-youtube>` . Для этого упражнения достаточно скопировать один из этих примеров и адаптировать его к приведенным выше требованиям. [/ Tip]

После внесения изменений посмотрите на свою страницу. Теперь вы должны увидеть видео на YouTube:

{{image ('/ static / img / courses / beginner / image18.png', 311, 550, выровняйте = 'центр третий', заголовок = 'Изображение видео YouTube на странице')}}

### Решение

[sourcecode: html] {% raw%} <amp-youtube data-videoid="BlpMQ7fMCzA" layout="responsive" width="480" height="270"></amp-youtube> {% endraw%} [/ sourcecode]

Не забудьте включить скрипт `<amp-youtube>` в `<head>` :

```
<script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
```

[tip type = "note"] **Примечание** . AMP также включает поддержку других видеоплееров. Ознакомьтесь с разделом « [Интеграция видео в обзор](https://ampbyexample.com/advanced/integrating_videos_in_amp_an_overview/) AMP» на примере AMP. [/ Tip] [/ filter] [filter level = "advanced"] На нашем сайте осталась только одна ошибка проверки, и мы исправим ее с помощью **компонент** `<amp-img>` вместо `<img>` .

## Что такое веб-компоненты?

Компоненты являются строительными блоками для Интернета. Они объединяют структуру (HTML), стили (CSS) и поведение (JavaScript) с простым интерфейсом. Компоненты имеют:

- Имя (например, `<amp-img>` ), используемое в качестве имени тега для идентификации компонента.

- Пользовательские атрибуты, которые изменяют поведение, стиль или содержимое компонента (например, `width` , `height` , `src` и `attribution` ).

- События, которые могут захватывать пользовательские входные данные для компонента ( `on` атрибуту).

У компонентов могут быть дочерние элементы, как и у большинства других тегов HTML.

Компонентная система AMP помогает вам быстро и эффективно создавать эффективные и быстро реагирующие функции на ваших страницах. Библиотека AMP предоставляет компоненты для построения форм и каруселей, для интеграции анализа страниц, для отправки XHR-запросов на серверы и многое другое. Вы можете увидеть полный список доступных компонентов в справочнике по компонентам AMP [здесь] ({{g.doc ('/ content / amp-dev / Documentation / components / index.html', locale = doc.locale) .url. путь}}).

Например, вот три компонента AMP, которые мы могли бы использовать на нашем сайте:

AMP компонент | Как это сделать на нашем сайте
--- | ---
`<amp-img src="IMG-URL" layout="responsive" width="640" height="480"></amp-img>` | {{image ('/ static / img / courses / beginner / image14.png', 311, 550)}}
`<amp-twitter width="486" height="657" layout="responsive" data-tweetid="ID"></amp-twitter>` | {{image ('/ static / img / courses / beginner / image19.png', 311, 550)}}
`<amp-youtube data-videoid="ID" layout="responsive" width="480" height="270"></amp-youtube>` | {{image ('/ static / img / courses / beginner / image15.png', 311, 550)}}

Цель создания сайтов AMP - по возможности использовать компоненты AMP. Компоненты максимизируют производительность с помощью AMP, потому что вам не нужно создавать что-то, что уже существует, тем самым усиливая работу авторов библиотеки AMP.

Почти все компоненты AMP работают на небольшом кусочке JavaScript. Для некоторых компонентов AMP, таких как `<amp-img>` , это включено в сценарий выполнения AMP. Однако большинству компонентов AMP требуется отдельный тег сценария, включенный в заголовок страницы. И для этого есть веская причина: вы включаете только те сценарии, которые фактически используете на своем сайте. Затем пользователям нужно только загрузить код, необходимый для просмотра вашей страницы.

## Упражнение 3: наш первый компонент - `<amp-img>`

Большинство тегов HTML можно использовать непосредственно в AMP, но некоторые теги, такие как `<img>` , должны быть заменены эквивалентными компонентами AMP. Эти компоненты включают в себя встроенные передовые практики в области доступности, отзывчивости и производительности.

Например, в случае `<amp-img>` , AMP требует от нас указать размеры изображения и закрыть тег с помощью `</amp-img>` . AMP необходимо понять макет страницы перед загрузкой ресурсов. Это улучшает взаимодействие с пользователем, когда ваша страница загружается, но до того, как ресурсы изображений были загружены. Когда изображения загружены, они могут быть вставлены в страницу без перемещения существующего содержимого на странице. Это дает возможность времени выполнения AMP решать, когда загружать изображения, на основе возможностей устройства пользователя и подключения к Интернету.

[tip type = "note"] **Примечание** . Если вы хотите узнать больше об автоматической оптимизации AMP, вы можете прочитать о отложенной загрузке в AMP в [приложении] ({{g.doc ('/ content / amp-dev /) документация / курсы / начальный курс / appendix.md ', locale = doc.locale) .url.path}}). [/чаевые]

Чтобы использовать компонент и устранить ошибку проверки `<amp-img>` , замените существующий тег img на нашей странице эквивалентом AMP. Вместо `<img …>` напишите `<amp-img …>` и присвойте вашему изображению фиксированную ширину 640 и высоту 480. При необходимости обратитесь к документации для `<amp-img>` [здесь] ({{g.doc ( '/content/amp-dev/documentation/components/reference/amp-img.md', locale = doc.locale) .url.path}}).

### Решение

Часть страницы, содержащая изображение, должна выглядеть следующим образом:

[sourcecode: html] {% raw%} <amp-img src="https://cdn.glitch.com/d7f46a57-0ca4-4cca-ab0f-69068dec6631%2Fricotta-racer.jpg?1540228217746" width="”640”" height="480"></amp-img> {% endraw%} [/ sourcecode]

[tip type = "note"] **Примечание** :: Проверьте расширение AMP Validator. Если вы успешно выполнили это упражнение, значок расширения должен быть зеленым. Если так, поздравляю! Ваша страница теперь действительна AMP! [/чаевые]

## Расположение и размер компонентов

Следующая проблема, которую нам нужно устранить, связана с тем, как выглядит наша страница. Вы не заметите этого на большом настольном мониторе, но легко увидеть, что не так, когда мы смотрим на сайт на мобильном устройстве.

{{image ('/ static / img / courses / beginner / image23.png', 311, 550, выровняйте = 'центр третий', заголовок = 'Изображение велосипеда убегает от края экрана')}}

Изображение, которое мы добавили на страницу, не сжимается, чтобы соответствовать меньшим экранам; это просто льется на бок. Если мы не укажем стратегию размещения изображения и изменения его размера, по умолчанию будет использоваться фиксированная ширина и высота, указанные в нашем коде. К счастью, мы можем решить эту проблему, используя систему макетов AMP.

Мы собираемся дать нашему изображению `layout` с типом `responsive` чтобы он автоматически масштабировался при изменении размера окна. Адаптивный макет заставляет изображение принимать размеры родительского контейнера, при этом соблюдая исходное соотношение сторон. Если родительский контейнер имеет ширину всего 320 пикселей, изображение сохранит свое соотношение сторон и будет изменено до 320x240 (вместо 640x480).

Добавьте атрибут `layout` к нашему изображению с `responsive` значением:

[sourcecode: html] {% raw%} <amp-img src="https://cdn.glitch.com/d7f46a57-0ca4-4cca-ab0f-69068dec6631%2Fricotta-racer.jpg?1540228217746" layout="responsive" width="640" height="480"></amp-img> {% endraw%} [/ sourcecode]

После внесения изменений взгляните на свою страницу. Изображение имеет правильное соотношение сторон и отзывчиво заполняет ширину экрана. Проблема решена.

{{image ('/ static / img / courses / beginner / image26.png', 311, 550, выровнять = 'центр третий', заголовок = 'Изображение велосипеда с правильным соотношением сторон')}}

Существуют и другие типы макетов, помимо адаптивного (не менее 8).

Например, `fixed` макет указывает, что размер компонента никогда не должен изменяться с высоты и ширины, которые ему назначены. `intrinsic` компоновка аналогична `responsive` компоновке, за исключением того, что она имеет концепцию внутренней высоты и ширины, которая не может быть превышена компонентом. Некоторые макеты могут применяться только к определенным компонентам. В документации для каждого компонента будет указано, какие макеты являются действительными для этого компонента. Вы можете прочитать об остальных типах макетов [здесь] ({{g.doc ('/ content / amp-dev / document / guides-and-tutorials / learn / amp-html-layout / layouts_demonstrated.html', locale = doc.locale) .url.path}}).

Все макеты, которые предоставляет AMP, могут быть реализованы с использованием простого CSS, но часто они могут быть сложными или иметь сложные крайние случаи, которые требуют глубоких знаний для обхода. AMP упрощает процесс и предоставляет многие из этих параметров макета для использования на любом элементе на странице AMP. Ознакомьтесь с [официальной документацией] ({{g.doc ('/ content / amp-dev / documents / guides-and-tutorials / learn / amp-html-layout / index.md', locale = doc.locale). url.path}}) для получения дополнительной информации о системе макетов.

[tip type = "tip"] **Совет** . Попробуйте выбрать другие мобильные устройства в раскрывающемся меню (см. снимок экрана ниже), чтобы увидеть, как изображение адаптируется к экранам разных размеров. Рекомендуется тестировать сайт на экранах разных размеров. Браузеры на реальных мобильных устройствах могут вести себя по-разному, поэтому по возможности проверяйте свою веб-страницу на реальных устройствах.

{{image ('/ static / img / courses / beginner / image4.png', 297, 380, выровнять = 'центральная половина', заголовок = 'выпадающий список устройств в Chrome')}} [/ tip]

## Упражнение 4: встраивание видео

Далее, давайте вставим видео YouTube в наш документ. Наша маркетинговая команда в Chico's Bikes выпустила [это](https://www.youtube.com/watch?v=BlpMQ7fMCzA) видео о том, как строится один из наших сырных велосипедов.

Используйте [ `<amp-youtube>` ] ({{g.doc ('/ content / amp-dev / Documentation / components / reference / amp-youtube.md', locale = doc.locale) .url.path}}) документация для встраивания этого видео на YouTube в компонент `<amp-img>` со следующими настройками:

- Установите идентификатор видео в `BlpMQ7fMCzA` .

- Сделайте видео макет `responsive` .

- **Примечание** : не забудьте добавить скрипт в `<head>` .

Рекомендуемые рекомендации по стилю:

- Установите `width` элемента `480` и `height` `270` .

[tip type = "read-on"] **Подсказка** : документация содержит примеры использования компонента `<amp-youtube>` . Для этого упражнения достаточно скопировать один из этих примеров и адаптировать его к приведенным выше требованиям. [/ Tip]

После внесения изменений посмотрите на свою страницу. Теперь вы должны увидеть видео на YouTube:

{{image ('/ static / img / courses / beginner / image18.png', 311, 550, выровняйте = 'центр третий', заголовок = 'Изображение видео YouTube на странице')}}

### Решение

[sourcecode: html] {% raw%} <amp-youtube data-videoid="BlpMQ7fMCzA" layout="responsive" width="480" height="270"></amp-youtube> {% endraw%} [/ sourcecode]

Не забудьте включить скрипт `<amp-youtube>` в `<head>` :

```
<script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
```

[tip type = "note"] **Примечание** . AMP также включает поддержку других видеоплееров. Посмотрите " [Интеграция видео в AMP обзор](https://ampbyexample.com/advanced/integrating_videos_in_amp_an_overview/) " в AMP на примере. [/ Tip] [/ filter]
